<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    <title>Title</title>
    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script>
</head>
<body>
<div id="content">############</div>
<input type="button" onclick="jsApiCall()" value="支付" id="pay"/>
<script>
    var _orderInfo = null;
    var _payJson = '{"timeStamp":"1561618321","package":"prepay_id=wx27145201497158132f4e41741157136400","appId":"wx4b74228baa15489a","sign":"mtOr5X1gXPcCdsy9FscQCGhl3oCBmd/EH0Vs2dEY5VOhTV3KzADK5XIUuX7r/piSAUyGJthNColdNBYhMP6hQB5HW+wIcZjPq8J1czIA32OJzSDaVCiOEWyTd74bBJXLYqRF/t7P1UJEfL7nAIIaUaFvFzHZ/XBVrNX4DygMKGqV0jrMENB55NuW8pgHuIUBG8mAbn15A+mnCkCKMu5w3sgvj3cEXQ51XhUvsIpZ/yGa3OxLS4uGnkkpsTgEm736GoOG0Ur+9hLwy+A71yUqDAMEecy6fp0vPXx6SxvCpa9rzsVgKvPw3UF8RL6y1aVPKvSAqTv/MDMgoHtMhTo/CQ==","signType":"RSA","nonceStr":"74e1cb90c1cf447dad6c1ea5ebe2ac7e","notifyToken":"19d37218ccf04033ae92a05eea01f347","openId":"oq8zq0GBmH_cUCOBfWMFxkIjGV7o"}';
    
    function jsApiCall() {
        $("#content").html("##：" + _payJson);
        console.log(_payJson.appId);
        console.log(_payJson.nonceStr);
        console.log(_payJson.timeStamp);
        console.log(_payJson.package);
        console.log(_payJson.signType);
        console.log(_payJson.paySign);
        WeixinJSBridge.invoke(
            'getBrandWCPayRequest', {
                'appId': _payJson.appId,
                'nonceStr': _payJson.nonceStr,
                'package': _payJson.package,
                'signType': _payJson.signType,
                'timeStamp': _payJson.timeStamp,
                'paySign': _payJson.paySign,
            },
            function (res) {
                WeixinJSBridge.log(res.err_msg);
                alert(res.err_code + res.err_desc + res.err_msg);
                if (res.err_msg == "get_brand_wcpay_request:ok") {
                    // 使用以上方式判断前端返回,微信团队郑重提示：
                    // res.err_msg将在用户支付成功后返回
                    // ok，但并不保证它绝对可靠。
                    alert("支付成功");
                }
                else if (res.err_msg == "get_brand_wcpay_request:cancel") {
                    alert("支付取消");
                }
                else {
                    alert("支付失败");
                }
            }
        );
    }
   
</script>
</body>
</html>